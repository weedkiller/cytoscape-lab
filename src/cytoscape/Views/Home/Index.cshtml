@{
    ViewData["Title"] = "Home Page";
}

<div id="cy"></div>
<textarea rows="10" style="width:500px" readonly id="logBox"></textarea>


@section scripts{
    <script src="js/cytoscape.js"></script>
    <script>
        $(document).ready(function() {
            var cy = cytoscape({
                container: document.getElementById('cy'),
                elements: [
                    // list of graph elements to start with
                    { data: { id: 'SwecoCore' }, position: { x: 275, y: 225 } },
                    { data: { id: 'Maconomy' }, position: { x: 50, y: 400 } },
                    { data: { id: 'HRPlus' }, position: { x: 500, y: 50 } },
                    { data: { id: 'Webbeko' }, position: { x: 500, y: 400 } },
                    { data: { id: 'Aplus' }, position: { x: 50, y: 50 } },
                    { data: { id: 'rel_1', source: 'Maconomy', target: 'SwecoCore' } },
                    { data: { id: 'rel_2', source: 'HRPlus', target: 'SwecoCore' } },
                    { data: { id: 'rel_3', source: 'Webbeko', target: 'SwecoCore' } },
                    { data: { id: 'rel_4', source: 'Aplus', target: 'SwecoCore', label: 'Ekonomidata till core' } },
                    { data: { id: 'rel_5', source: 'Aplus', target: 'HRPlus', label: 'asdfasdf' } }
                ],
                style: [
                    // the stylesheet for the graph
                    {
                        selector: 'node',
                        style: {
                            'background-color': '#666',
                            'label': 'data(id)'

                        }
                    },
                    {
                        selector: 'edge',
                        style: {
                            'width': 3,
                            'line-color': '#ccc',
                            'target-arrow-color': '#ccc',
                            'target-arrow-shape': 'triangle',
                            'label': 'data(label)',
                            'font-size': '10px',
                            'edge-text-rotation': 'autorotate'
                        }
                    }
                ],
                layout:
                {
                    name: 'preset',
                    //    rows:
                    //1
                }
            });
            console.log("cyto initialized...");

            cy.$("node")
                .on('mouseup', function() {
                    var d = new Date();
                    $("#logBox").val(d.getHours() + ":" + (d.getMinutes() < 10 ? "0" : "") + d.getMinutes() + ":" + (d.getSeconds() < 10 ? "0" : "") + d.getSeconds() + " - New position of " + this.id() + ": { x: " + Math.round(this.position().x) + ", y: " + Math.round(this.position().y) + "}\n" + $("#logBox").val());

                });
        });
    </script>
}
